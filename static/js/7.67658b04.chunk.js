(window["webpackJsonpcrypto-structured-fund-frontend"]=window["webpackJsonpcrypto-structured-fund-frontend"]||[]).push([[7],{1060:function(e,t,a){"use strict";a.r(t);var n=a(4),l=a.n(n),r=a(32),c=a(51),u=a(0),i=a.n(u),o=a(64),m=a.n(o),s=a(11),d=a(194),E=a(860),f=a(874),b=a(22),p=a(875),F=a(849),h=a(876),v=a(877),O=a(914);function j(e){var t=e.x,a=e.y,n=e.payload,l=100===n.value?"#F9FF2D":"#FFFFFF";return i.a.createElement("text",{x:t-10,y:a,fill:l,width:"80",textAnchor:"middle"},"".concat(n.value,"%"))}function g(e){var t=e.cx,a=e.cy,n=(e.r,e.payload.active?"#F9FF2D":"#00FF8C");return i.a.createElement("circle",{cx:t,cy:a,r:"4",fill:n})}function x(e){var t=e.data.sort((function(e,t){return e.price-t.price}));return i.a.createElement(O.e,null,i.a.createElement(O.g,null,i.a.createElement(O.h,{dataKey:"price",type:"number",domain:["dataMin","dataMax"],interval:0,stroke:"#FFFFFF",height:50,padding:{left:30,right:30},axisLine:{strokeWidth:2},tickLine:!1,tick:{fontWeight:500},tickCount:10},i.a.createElement(O.c,{value:"ETH Price (USD)",offset:5,position:"insideBottom",fill:"#FFFFFF",fontWeight:500})),i.a.createElement(O.i,{dataKey:"rate",type:"number",stroke:"#FFFFFF",width:80,padding:{top:30,bottom:30},axisLine:!1,tickLine:!1,tick:j},i.a.createElement(O.c,{value:"Outcome / Current Price",offset:10,position:"insideLeft",style:{textAnchor:"middle"},angle:-90,fill:"#FFFFFF",fontWeight:500})),i.a.createElement(O.f,{data:t,line:{stroke:"#00FF8C",strokeWidth:4},fill:"#00FF8C",shape:g})))}var k=a(913);function w(){var e=Object(s.useWeb3Context)().account,t=Object(E.d)(),a=Object(f.h)(),n=Object(f.k)(),o=n.purchaseExpiringDate,O=n.redeemStartingDate,j=Object(f.e)(),g=Object(f.j)(),w=Object(f.i)(),y=Object(E.f)("DAI","ETH"),C=Object(E.f)("ETH","USD"),D=Object(f.f)(),H=Object(f.g)(),S=Object(d.c)(),T=Object(u.useState)(""),M=Object(c.a)(T,2),P=M[0],I=M[1],L=Object(u.useState)(500),W=Object(c.a)(L,2),U=W[0],A=W[1],N=Object(u.useMemo)((function(){return!!e}),[e]),B=Object(u.useMemo)((function(){return j&&g&&y?j.times(y).plus(g):null}),[j,g,y]),R=Object(u.useMemo)((function(){return B&&g?B.div(g):null}),[B,g]),J=Object(u.useMemo)((function(){if(B&&U&&j&&g){var e=B.times(U).minus(j.times(1.2)).div(g);return e.gt(0)?e:new m.a(0)}return null}),[B,U,j,g]),K=Object(u.useMemo)((function(){return J&&C?J.minus(C).div(C):null}),[J,C]),Y=Object(u.useMemo)((function(){return j&&g&&B&&C?[{price:parseInt(j.times(1.2).div(B).toFixed(0)),rate:0},{price:parseInt(g.times(C).plus(j.times(1.2)).div(B).toFixed(0)),rate:100},{price:parseInt(g.times(C).times(4).plus(j.times(1.2)).div(B).toFixed(0)),rate:400},{price:U,rate:parseInt(K.times(100).toFixed(0))+100,active:!0}]:[]}),[j,g,B,C,U,K]),q=Object(u.useCallback)(Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new m.a(P).times(1e18).toString(),e.next=3,D(t);case 3:e.sent.on("transactionHash",(function(e){S(e)})).on("error",(function(){I("")}));case 5:case"end":return e.stop()}}),e)}))),[D,S,P]),z=Object(u.useCallback)(Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new m.a(P).times(1e18).toString(),e.next=3,H(t);case 3:e.sent.on("transactionHash",(function(e){S(e)})).on("error",(function(){I("")}));case 5:case"end":return e.stop()}}),e)}))),[H,P,S]),G=Date.now()<o,Q=Date.now()>O;return i.a.createElement(p.a,null,i.a.createElement(p.b,null,i.a.createElement(h.a,{strong:!0},i.a.createElement(F.h,null,"Leverage"),i.a.createElement(F.d,null,R?R.toFixed(2):"-")),i.a.createElement(h.a,null,i.a.createElement(F.h,null,"Pool (ETH)"),i.a.createElement(F.d,null,g?Object(b.a)(g,18):"-")),i.a.createElement(h.a,null,i.a.createElement(F.h,null,"Investors"),i.a.createElement(F.d,null,w||"-"))),i.a.createElement(p.b,null,i.a.createElement(h.b,null,i.a.createElement(h.d,null,i.a.createElement(h.f,null,i.a.createElement(F.h,null,i.a.createElement(F.a,null,"Already Bought"," ",a?Object(b.a)(a,18):"0"," ","units.")),i.a.createElement(F.f,null,"Your Balance:"," ",t?Object(b.a)(t,18):"-"," ETH")),G?i.a.createElement(v.b,null,i.a.createElement(v.c,null,i.a.createElement("input",{type:"number",placeholder:"0.0",value:P,onChange:function(e){I(e.target.value)}}),i.a.createElement("span",{className:"suffix"},"ETH")),i.a.createElement(v.a,{onClick:q,disabled:!N},"Purchase")):Q?i.a.createElement(v.b,null,i.a.createElement(v.c,null,i.a.createElement("input",{type:"number",placeholder:"0.0",value:P,onChange:function(e){I(e.target.value)}}),i.a.createElement("span",{className:"suffix"},"ETH")),i.a.createElement(v.a,{onClick:z,disabled:!N},"Redeem")):i.a.createElement(h.f,null,i.a.createElement(F.f,null,"The fund is in the locked period."))),i.a.createElement(h.c,null,i.a.createElement(h.e,null,i.a.createElement("div",{className:"item"},i.a.createElement(k.a,null),i.a.createElement(F.g,null,"Purchase Due Date:"," ",o?Object(b.b)(o):"-")),i.a.createElement("div",{className:"item"},i.a.createElement(k.a,null),i.a.createElement(F.g,null,"Redeem Starting Date:"," ",O?Object(b.b)(O):"-")))))),i.a.createElement(p.b,null,i.a.createElement(F.b,null,"Estimated Profits/unit if Ether hits USD",i.a.createElement(v.d,{type:"number",placeholder:"200",value:U,onChange:function(e){A(e.target.value)}})),i.a.createElement(p.c,null),i.a.createElement(F.f,null,"Unit: USD/ETH")),i.a.createElement(p.d,null,i.a.createElement(h.a,null,i.a.createElement(F.h,null,"Outcomes"),i.a.createElement(F.d,null,J?J.toFixed(4):"-")),i.a.createElement(h.a,null,i.a.createElement(F.h,null,"Profit Rate"),i.a.createElement(F.d,null,K?"".concat(K.times(100).toFixed(0),"%"):"-")),i.a.createElement(h.a,null,i.a.createElement(F.h,null,"Current Price"),i.a.createElement(F.d,null,C?C.toFixed(2):"-"))),i.a.createElement(p.d,null,i.a.createElement(h.a,null,i.a.createElement("div",{style:{width:"90%",height:"300px"}},i.a.createElement(x,{data:Y})))))}a.d(t,"default",(function(){return w}))}}]);
//# sourceMappingURL=7.67658b04.chunk.js.map
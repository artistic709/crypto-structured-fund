(window["webpackJsonpcrypto-structured-fund-frontend"]=window["webpackJsonpcrypto-structured-fund-frontend"]||[]).push([[7],{1059:function(e,t,a){"use strict";a.r(t);var n=a(4),l=a.n(n),r=a(32),c=a(51),i=a(0),u=a.n(i),o=a(64),m=a.n(o),s=a(11),d=a(194),E=a(860),f=a(874),p=a(22),F=a(875),b=a(849),h=a(876),v=a(877),g=a(914);function O(e){var t=e.x,a=e.y,n=e.payload,l=100===n.value?"#F9FF2D":"#FFFFFF";return u.a.createElement("text",{x:t-10,y:a,fill:l,width:"80",textAnchor:"middle"},"".concat(n.value,"%"))}function j(e){var t=e.cx,a=e.cy,n=(e.r,e.payload.active?"#F9FF2D":"#00FF8C");return u.a.createElement("circle",{cx:t,cy:a,r:"4",fill:n})}function x(e){var t=e.investingData,a=e.holdingData,n=t.sort((function(e,t){return e.price-t.price})),l=a.sort((function(e,t){return e.price-t.price}));return u.a.createElement(g.f,null,u.a.createElement(g.h,null,u.a.createElement(g.i,{dataKey:"price",type:"number",domain:["dataMin","dataMax"],interval:0,stroke:"#FFFFFF",height:50,padding:{left:30,right:30},axisLine:{strokeWidth:2},tickLine:!1,tick:{fontWeight:500},tickCount:10},u.a.createElement(g.c,{value:"ETH Price (USD)",offset:5,position:"insideBottom",fill:"#FFFFFF",fontWeight:500})),u.a.createElement(g.j,{dataKey:"rate",type:"number",stroke:"#FFFFFF",width:80,padding:{top:30,bottom:30},axisLine:!1,tickLine:!1,tick:O},u.a.createElement(g.c,{value:"Outcome / Current Price",offset:10,position:"insideLeft",style:{textAnchor:"middle"},angle:-90,fill:"#FFFFFF",fontWeight:500})),u.a.createElement(g.d,{verticalAlign:"top",height:36,iconSize:8}),u.a.createElement(g.g,{name:"Outcome if Investing",data:n,line:{stroke:"#00FF8C",strokeWidth:4},fill:"#00FF8C",shape:j}),u.a.createElement(g.g,{name:"Outcome if Holding",data:l,line:{stroke:"#00C8FF",strokeWidth:4},fill:"#00C8FF"})))}var D=a(913);function k(){var e=Object(s.useWeb3Context)().account,t=Object(E.d)(),a=Object(f.h)(),n=Object(f.k)(),o=n.purchaseExpiringDate,g=n.redeemStartingDate,O=Object(f.e)(),j=Object(f.j)(),k=Object(f.i)(),w=Object(E.f)("DAI","ETH"),y=Object(E.f)("ETH","USD"),C=Object(f.f)(),S=Object(f.g)(),I=Object(d.c)(),H=Object(i.useState)(""),T=Object(c.a)(H,2),M=T[0],P=T[1],W=Object(i.useState)(500),L=Object(c.a)(W,2),A=L[0],U=L[1],B=Object(i.useMemo)((function(){return!!e}),[e]),N=Object(i.useMemo)((function(){return O&&j&&w?O.times(w).plus(j):null}),[O,j,w]),R=Object(i.useMemo)((function(){return N&&j?N.div(j):null}),[N,j]),J=Object(i.useMemo)((function(){if(N&&O&&j){var e=N.times(A).minus(O.times(1.2)).div(j);return e.gt(0)?e:new m.a(0)}return null}),[N,A,O,j]),K=Object(i.useMemo)((function(){return J&&y?J.minus(y).div(y):null}),[J,y]),z=Object(i.useMemo)((function(){if(O&&j&&N&&y){var e=parseInt(O.times(1.2).div(N).toFixed(0)),t=parseInt(j.times(y).plus(O.times(1.2)).div(N).toFixed(0)),a=parseInt(j.times(y).times(4).plus(O.times(1.2)).div(N).toFixed(0)),n=parseInt(new m.a(t).minus(y).div(y).times(100).plus(100).toFixed(0)),l=parseInt(new m.a(a).minus(y).div(y).times(100).plus(100).toFixed(0)),r=parseInt(new m.a(A).minus(y).div(y).times(100).plus(100).toFixed(0));return{investingOutcomeData:[{price:e-30,rate:0},{price:e,rate:0},{price:t,rate:100},{price:a,rate:400},{price:A,rate:parseInt(K.times(100).toFixed(0))+100,active:!0}],holdingOutcomeData:[{price:t,rate:n},{price:a,rate:l},{price:A,rate:r,active:!0}]}}return{investingOutcomeData:[],holdingOutcomeData:[]}}),[O,j,N,y,A,K]),Y=Object(i.useCallback)(Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new m.a(M).times(1e18).toString(),C(t,(function(e){I(e)}),(function(){P("")}),(function(){P("")}));case 5:case"end":return e.stop()}}),e)}))),[C,I,M]),q=Object(i.useCallback)(Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new m.a(M).times(1e18).toString(),S(t,(function(e){I(e)}),(function(){P("")}),(function(){P("")}));case 5:case"end":return e.stop()}}),e)}))),[S,M,I]),G=Date.now()<o,Q=Date.now()>g;return u.a.createElement(F.a,null,u.a.createElement(F.b,null,u.a.createElement(h.a,{strong:!0},u.a.createElement(b.h,null,"Leverage"),u.a.createElement(b.d,null,R?R.toFixed(2):"-")),u.a.createElement(h.a,null,u.a.createElement(b.h,null,"Pool (ETH)"),u.a.createElement(b.d,null,j?Object(p.a)(j,18):"-")),u.a.createElement(h.a,null,u.a.createElement(b.h,null,"Investors"),u.a.createElement(b.d,null,k||"-"))),u.a.createElement(F.b,null,u.a.createElement(h.b,null,u.a.createElement(h.d,null,u.a.createElement(h.f,null,u.a.createElement(b.h,null,u.a.createElement(b.a,null,"Already Bought"," ",a?Object(p.a)(a,18):"0"," ","units.")),u.a.createElement(b.f,null,"Your Balance:"," ",t?Object(p.a)(t,18):"-"," ETH")),G?u.a.createElement(v.b,null,u.a.createElement(v.c,null,u.a.createElement("input",{type:"number",placeholder:"0.0",value:M,onChange:function(e){P(e.target.value)}}),u.a.createElement("span",{className:"suffix"},"ETH")),u.a.createElement(v.a,{onClick:Y,disabled:!B},"Purchase")):Q?u.a.createElement(v.b,null,u.a.createElement(v.c,null,u.a.createElement("input",{type:"number",placeholder:"0.0",value:M,onChange:function(e){P(e.target.value)}}),u.a.createElement("span",{className:"suffix"},"ETH")),u.a.createElement(v.a,{onClick:q,disabled:!B},"Redeem")):u.a.createElement(h.f,null,u.a.createElement(b.f,null,"The fund is in the locked period."))),u.a.createElement(h.c,null,u.a.createElement(h.e,null,u.a.createElement("div",{className:"item"},u.a.createElement(D.a,null),u.a.createElement(b.g,null,"Purchase Due Date:"," ",o?Object(p.b)(o):"-")),u.a.createElement("div",{className:"item"},u.a.createElement(D.a,null),u.a.createElement(b.g,null,"Redeem Starting Date:"," ",g?Object(p.b)(g):"-")))))),u.a.createElement(F.b,{justifyBetween:!0},u.a.createElement(b.b,null,"Estimated Profits/unit if Ether hits USD",u.a.createElement(v.d,{type:"number",placeholder:"200",value:A,onChange:function(e){U(e.target.value)}})),u.a.createElement(b.f,null,"Unit: USD/ETH")),u.a.createElement(F.c,null,u.a.createElement(h.a,null,u.a.createElement(b.h,null,"Outcomes"),u.a.createElement(b.d,null,J?J.toFixed(4):"-")),u.a.createElement(h.a,null,u.a.createElement(b.h,null,"Profit Rate"),u.a.createElement(b.d,null,K?"".concat(K.times(100).toFixed(0),"%"):"-")),u.a.createElement(h.a,null,u.a.createElement(b.h,null,"Current Price"),u.a.createElement(b.d,null,y?y.toFixed(2):"-"))),u.a.createElement(F.c,null,u.a.createElement(h.a,null,u.a.createElement("div",{style:{width:"90%",height:"300px"}},u.a.createElement(x,{investingData:z.investingOutcomeData,holdingData:z.holdingOutcomeData})))))}a.d(t,"default",(function(){return k}))}}]);
//# sourceMappingURL=7.f5df3e30.chunk.js.map
(window["webpackJsonpcrypto-structured-fund-frontend"]=window["webpackJsonpcrypto-structured-fund-frontend"]||[]).push([[7],{1060:function(e,t,n){"use strict";n.r(t);var a=n(4),l=n.n(a),r=n(32),c=n(51),u=n(0),i=n.n(u),o=n(64),m=n.n(o),s=n(11),d=n(194),E=n(860),f=n(874),b=n(22),p=n(875),h=n(849),F=n(876),O=n(877),j=n(914),v=function(e){var t=e.x,n=e.y,a=e.payload,l=100===a.value?"#F9FF2D":"#FFFFFF";return i.a.createElement("text",{x:t-10,y:n,fill:l,width:"80",textAnchor:"middle"},"".concat(a.value,"%"))};function g(e){var t=e.data.sort((function(e,t){return e.price-t.price}));return i.a.createElement(j.g,null,i.a.createElement(j.e,{data:t},i.a.createElement(j.h,{dataKey:"price",stroke:"#FFFFFF",height:50,padding:{left:30,right:30},axisLine:{strokeWidth:2},tickLine:!1,tick:{fontWeight:500}},i.a.createElement(j.c,{value:"ETH Price (USD)",offset:5,position:"insideBottom",fill:"#FFFFFF",fontWeight:500})),i.a.createElement(j.i,{stroke:"#FFFFFF",width:80,padding:{top:30,bottom:30},axisLine:!1,tickLine:!1,tick:v},i.a.createElement(j.c,{value:"Outcome / Current Price",offset:10,position:"insideLeft",style:{textAnchor:"middle"},angle:-90,fill:"#FFFFFF",fontWeight:500})),i.a.createElement(j.d,{dataKey:"rate",type:"linear",stroke:"#00FF8C",strokeWidth:"4"})))}var x=n(913);function k(){var e=Object(s.useWeb3Context)().account,t=Object(E.d)(),n=Object(f.h)(),a=Object(f.k)(),o=a.purchaseExpiringDate,j=a.redeemStartingDate,v=Object(f.e)(),k=Object(f.j)(),w=Object(f.i)(),y=Object(E.f)("DAI","ETH"),D=Object(E.f)("ETH","USD"),C=Object(f.f)(),H=Object(f.g)(),S=Object(d.c)(),T=Object(u.useState)(""),P=Object(c.a)(T,2),L=P[0],M=P[1],W=Object(u.useState)(500),I=Object(c.a)(W,2),U=I[0],A=I[1],N=Object(u.useMemo)((function(){return!!e}),[e]),B=Object(u.useMemo)((function(){return v&&k&&y?v.times(y).plus(k):null}),[v,k,y]),R=Object(u.useMemo)((function(){return B&&k?B.div(k):null}),[B,k]),J=Object(u.useMemo)((function(){if(B&&U&&v&&k){var e=B.times(U).minus(v.times(1.2)).div(k);return e.gt(0)?e:new m.a(0)}return null}),[B,U,v,k]),K=Object(u.useMemo)((function(){return J&&D?J.minus(D).div(D):null}),[J,D]),Y=Object(u.useMemo)((function(){return v&&k&&B&&D?[{price:parseInt(v.times(1.2).div(B).toFixed(0)),rate:0},{price:parseInt(k.times(D).plus(v.times(1.2)).div(B).toFixed(0)),rate:100},{price:parseInt(k.times(D).times(4).plus(v.times(1.2)).div(B).toFixed(0)),rate:400}]:[]}),[v,k,B,D]),q=Object(u.useCallback)(Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new m.a(L).times(1e18).toString(),e.next=3,C(t);case 3:e.sent.on("transactionHash",(function(e){S(e)})).on("error",(function(){M("")}));case 5:case"end":return e.stop()}}),e)}))),[C,S,L]),z=Object(u.useCallback)(Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new m.a(L).times(1e18).toString(),e.next=3,H(t);case 3:e.sent.on("transactionHash",(function(e){S(e)})).on("error",(function(){M("")}));case 5:case"end":return e.stop()}}),e)}))),[H,L,S]),G=Date.now()<o,Q=Date.now()>j;return i.a.createElement(p.a,null,i.a.createElement(p.b,null,i.a.createElement(F.a,{strong:!0},i.a.createElement(h.h,null,"Leverage"),i.a.createElement(h.d,null,R?R.toFixed(2):"-")),i.a.createElement(F.a,null,i.a.createElement(h.h,null,"Pool (ETH)"),i.a.createElement(h.d,null,k?Object(b.a)(k,18):"-")),i.a.createElement(F.a,null,i.a.createElement(h.h,null,"Investors"),i.a.createElement(h.d,null,w||"-"))),i.a.createElement(p.b,null,i.a.createElement(F.b,null,i.a.createElement(F.d,null,i.a.createElement(F.f,null,i.a.createElement(h.h,null,i.a.createElement(h.a,null,"Already Bought"," ",n?Object(b.a)(n,18):"0"," ","units.")),i.a.createElement(h.f,null,"Your Balance:"," ",t?Object(b.a)(t,18):"-"," ETH")),G?i.a.createElement(O.b,null,i.a.createElement(O.c,null,i.a.createElement("input",{type:"number",placeholder:"0.0",value:L,onChange:function(e){M(e.target.value)}}),i.a.createElement("span",{className:"suffix"},"ETH")),i.a.createElement(O.a,{onClick:q,disabled:!N},"Purchase")):Q?i.a.createElement(O.b,null,i.a.createElement(O.c,null,i.a.createElement("input",{type:"number",placeholder:"0.0",value:L,onChange:function(e){M(e.target.value)}}),i.a.createElement("span",{className:"suffix"},"ETH")),i.a.createElement(O.a,{onClick:z,disabled:!N},"Redeem")):i.a.createElement(F.f,null,i.a.createElement(h.f,null,"The fund is in the locked period."))),i.a.createElement(F.c,null,i.a.createElement(F.e,null,i.a.createElement("div",{className:"item"},i.a.createElement(x.a,null),i.a.createElement(h.g,null,"Purchase Due Date:"," ",o?Object(b.b)(o):"-")),i.a.createElement("div",{className:"item"},i.a.createElement(x.a,null),i.a.createElement(h.g,null,"Redeem Starting Date:"," ",j?Object(b.b)(j):"-")))))),i.a.createElement(p.b,null,i.a.createElement(h.b,null,"Estimated Profits/unit if Ether hits USD",i.a.createElement(O.d,{type:"number",placeholder:"200",value:U,onChange:function(e){A(e.target.value)}})),i.a.createElement(p.c,null),i.a.createElement(h.f,null,"Unit: USD/ETH")),i.a.createElement(p.d,null,i.a.createElement(F.a,null,i.a.createElement(h.h,null,"Outcomes"),i.a.createElement(h.d,null,J?J.toFixed(4):"-")),i.a.createElement(F.a,null,i.a.createElement(h.h,null,"Profit Rate"),i.a.createElement(h.d,null,K?"".concat(K.times(100).toFixed(0),"%"):"-")),i.a.createElement(F.a,null,i.a.createElement(h.h,null,"Current Price"),i.a.createElement(h.d,null,D?D.toFixed(2):"-"))),i.a.createElement(p.d,null,i.a.createElement(F.a,null,i.a.createElement("div",{style:{width:"90%",height:"300px"}},i.a.createElement(g,{data:Y})))))}n.d(t,"default",(function(){return k}))}}]);
//# sourceMappingURL=7.277905ef.chunk.js.map
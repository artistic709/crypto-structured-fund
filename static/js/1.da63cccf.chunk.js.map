{"version":3,"sources":["hooks/ethereum.js","constants/index.js","hooks/fund.js","themes/layout.js","themes/block.js","themes/form.js","assets/item.svg"],"names":["useContract","address","abi","withSignerIfPossible","useWeb3Context","account","library","useMemo","getContract","undefined","useEthBalance","blockNumber","useBlockNumber","useState","balance","setBalance","useEffect","eth","getBalance","then","result","BigNumber","catch","useDaiBalance","networkId","daiContract","DAI_ADDRESSES","DAI_ABI","methods","balanceOf","call","useDaiAllowance","getPrice","useGasPrice","allowance","setAllowance","approve","useCallback","onTransactionHash","onReceipt","onError","a","approveFund","CRYPTO_STRUCTURED_FUND_ADDRESSES","estimateGas","gas","gasPrice","send","from","on","level","setLevel","getGasPrice","usePriceConvertionRate","symbol","convert","rate","setRate","getPriceConvertionRate","1","4","CRYPTO_STRUCTURED_FUND_CREATION_BLOCK","useFundContract","CRYPTO_STRUCTURED_FUND_ABI","useRate","fundContract","div","useFundDates","purchaseExpiringDate","setPurchaseExpiringDate","redeemStartingDate","setRedeemStartingDate","Promise","all","startBuy","startSell","times","toNumber","useDaiInvestorAmount","amount","setAmount","getPastEvents","fromBlock","events","map","event","returnValues","depositor","filter","i","arr","indexOf","length","useDaiPool","pool","setPool","totalSupply","useDaiFundUnits","useDaiFundPurchase","deposit","estimatedGas","toFixed","useDaiFundRedeem","withdraw","useEthInvestorAmount","investor","useEthPool","totalInvestment","useEthFundUnits","investmentOf","useEthFundPurchase","invest","value","useEthFundRedeem","redeem","Container","styled","Row","justifyBetween","SubRow","PurchaseBlock","theme","mirageBlue","PurchaseBlockTop","PurchaseBlockBottom","PurchaseInfo","PurchaseDate","DataBlock","strong","eucalyptusGreen","white","PurchaseForm","PurchaseInputField","textColor","loblollyGray","PurchaseButton","button","USDInput","input","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","_ref3","_ref4","id","stroke","strokeWidth","fill","fillRule","transform","x","y","width","height","rx","SvgItem","_ref","svgRef","title","props","viewBox","ref","ForwardRef","forwardRef"],"mappings":"idAQO,SAASA,EAAYC,EAASC,GAAmC,IAA9BC,IAA6B,2DACxCC,2BAArBC,EAD6D,EAC7DA,QAASC,EADoD,EACpDA,QAEjB,OAAOC,mBAAQ,WACb,IACE,OAAOC,YACLP,EACAC,EACAI,EACAH,EAAuBE,OAAUI,GAEnC,SACA,OAAO,QAER,CAACR,EAASC,EAAKI,EAASD,EAASF,IAG/B,SAASO,IAAiB,IAAD,EACDN,2BAArBC,EADsB,EACtBA,QAASC,EADa,EACbA,QACXK,EAAcC,cAFU,EAGAC,qBAHA,mBAGvBC,EAHuB,KAGdC,EAHc,KAgB9B,OAXAC,qBAAU,WACRV,EAAQW,IACLC,WAAWb,GACXc,MAAK,SAAAC,GACJL,EAAW,IAAIM,IAAUD,OAE1BE,OAAM,WACLP,SAEH,CAACV,EAASC,EAASK,IAEfG,EAGF,SAASS,IAAiB,IAAD,EACCnB,2BAAvBC,EADsB,EACtBA,QAASmB,EADa,EACbA,UACXb,EAAcC,cACda,EAAczB,EAAY0B,IAAcF,GAAYG,GAH5B,EAIAd,qBAJA,mBAIvBC,EAJuB,KAIdC,EAJc,KAkB9B,OAZAC,qBAAU,WACRS,EAAYG,QACTC,UAAUxB,GACVyB,OACAX,MAAK,SAAAC,GACJL,EAAW,IAAIM,IAAUD,OAE1BE,OAAM,WACLP,SAEH,CAACV,EAASM,EAAac,IAEnBX,EAGF,SAASiB,IAAmB,IAAD,EACD3B,2BAAvBC,EADwB,EACxBA,QAASmB,EADe,EACfA,UACXb,EAAcC,cACda,EAAczB,EAAY0B,IAAcF,GAAYG,GAClDK,EAAaC,IAAbD,SAJwB,EAKEnB,qBALF,mBAKzBqB,EALyB,KAKdC,EALc,KAO1BC,EAAUC,sBAAW,uCACzB,WAAOC,EAAmBC,EAAWC,GAArC,mBAAAC,EAAA,6DACQC,EAAcjB,EAAYG,QAAQQ,QACtCO,IAAiCnB,IAFrC,SAIoBkB,EAAYE,cAJhC,cAIQC,EAJR,gBAKyBb,IALzB,OAKQc,EALR,OAOEJ,EACGK,KAAK,CACJC,KAAM3C,EACNwC,MACAC,aAEDG,GAAG,QAAST,GACZS,GAAG,UAAWV,GACdU,GAAG,kBAAmBX,GAf3B,2CADyB,0DAkBzB,CAACb,EAAaO,EAAU3B,EAASmB,IAenC,OAZAR,qBAAU,WACRS,EAAYG,QACTM,UAAU7B,EAASsC,IAAiCnB,IACpDM,OACAX,MAAK,SAAAC,GACJe,EAAa,IAAId,IAAUD,OAE5BE,OAAM,WACLa,SAEH,CAACV,EAAapB,EAASmB,EAAWb,IAE9B,CAAEuB,YAAWE,WAGf,SAASH,IAAe,IAAD,EACFpB,mBAAS,QADP,mBACrBqC,EADqB,KACdC,EADc,KAI5B,MAAO,CAAEnB,SAFQK,uBAAY,kBAAMe,YAAYF,KAAQ,CAACA,IAErCC,YAGd,SAASE,EAAuBC,EAAQC,GAAU,IAAD,EAC9B1C,qBAD8B,mBAC/C2C,EAD+C,KACzCC,EADyC,KAatD,OAVAzC,qBAAU,WACR0C,YAAuBJ,EAAQC,GAC5BpC,MAAK,SAAAC,GACJqC,EAAQ,IAAIpC,IAAUD,OAEvBE,OAAM,WACLmC,SAEH,CAACH,EAAQC,IAELC,I,iCChIT,sGAAO,IAAMb,EAAmC,CAC9CgB,EAAG,GACHC,EAAG,8CAGQC,EAAwC,QAExCnC,EAAgB,CAC3BiC,EAAG,6CACHC,EAAG,+C,iiBCEE,SAASE,IAAmB,IACzBtC,EAAcpB,2BAAdoB,UACR,OAAOxB,YACL2C,IAAiCnB,GACjCuC,GAIG,SAASC,IACd,IAAMC,EAAeH,IADG,EAEAjD,qBAFA,mBAEjB2C,EAFiB,KAEXC,EAFW,KAgBxB,OAZAzC,qBAAU,WACRiD,EAAarC,QACV4B,OACA1B,OACAX,MAAK,SAAAC,GACJqC,EAAQ,IAAIpC,IAAUD,GAAQ8C,IAAI,UAEnC5C,OAAM,WACLmC,SAEH,CAACQ,IAEGT,EAGF,SAASW,IACd,IAAMF,EAAeH,IADQ,EAE2BjD,qBAF3B,mBAEtBuD,EAFsB,KAEAC,EAFA,OAGuBxD,qBAHvB,mBAGtByD,EAHsB,KAGFC,EAHE,KAoB7B,OAfAvD,qBAAU,WACRwD,QAAQC,IAAI,CACVR,EAAarC,QAAQ8C,WAAW5C,OAChCmC,EAAarC,QAAQ+C,YAAY7C,SAEhCX,MAAK,YAA4B,IAAD,mBAAzBuD,EAAyB,KAAfC,EAAe,KAC/BN,EAAwB,IAAIhD,IAAUqD,GAAUE,MAAM,KAAMC,YAC5DN,EAAsB,IAAIlD,IAAUsD,GAAWC,MAAM,KAAMC,eAE5DvD,OAAM,WACL+C,IACAE,SAEH,CAACN,IAEG,CAAEG,uBAAsBE,sBAG1B,SAASQ,IACd,IAAMb,EAAeH,IACfnD,EAAcC,cAFiB,EAGTC,qBAHS,mBAG9BkE,EAH8B,KAGtBC,EAHsB,KAwBrC,OAnBAhE,qBAAU,WACRiD,EACGgB,cAAc,UAAW,CACxBC,UAAWrB,MAEZ1C,MACC,SAAAgE,GAAM,OACJA,EACGC,KAAI,SAAAC,GAAK,OAAIA,EAAMC,aAAaC,aAChCC,QAAO,SAACD,EAAWE,EAAGC,GAAf,OAAuBA,EAAIC,QAAQJ,KAAeE,KAAGG,UAElEzE,MAAK,SAAAC,GACJ4D,EAAU5D,MAEXE,OAAM,WACL0D,SAEH,CAACf,EAActD,IAEXoE,EAGF,SAASc,IACd,IAAM5B,EAAeH,IACfnD,EAAcC,cAFO,EAGHC,qBAHG,mBAGpBiF,EAHoB,KAGdC,EAHc,KAiB3B,OAZA/E,qBAAU,WACRiD,EAAarC,QACVoE,cACAlE,OACAX,MAAK,SAAAC,GACJ2E,EAAQ,IAAI1E,IAAUD,OAEvBE,OAAM,WACLyE,SAEH,CAAC9B,EAActD,IAEXmF,EAGF,SAASG,IAAmB,IACzB5F,EAAYD,2BAAZC,QACF4D,EAAeH,IAFW,EAGFjD,qBAHE,mBAGzBC,EAHyB,KAGhBC,EAHgB,KAiBhC,OAZAC,qBAAU,WACRiD,EAAarC,QACVC,UAAUxB,GACVyB,OACAX,MAAK,SAAAC,GACJL,EAAW,IAAIM,IAAUD,OAE1BE,OAAM,WACLP,SAEH,CAACkD,EAAc5D,IAEXS,EAGF,SAASoF,IAAsB,IAC5B7F,EAAYD,2BAAZC,QACF4D,EAAeH,IACb9B,EAAaC,cAAbD,SAER,OAAOK,sBAAW,uCAChB,WAAM0C,GAAN,qBAAAtC,EAAA,6DACQ0D,EAAUlC,EAAarC,QAAQuE,QAAQpB,GAD/C,SAE6BoB,EAAQvD,cAFrC,cAEQwD,EAFR,OAGQvD,EAAM,IAAIxB,IAAU+E,GAAcxB,MAAM,KAAKyB,QAAQ,GAH7D,SAIyBrE,IAJzB,cAIQc,EAJR,yBAOSqD,EAAQpD,KAAK,CAClBC,KAAM3C,EACNwC,MACAC,cAVJ,2CADgB,sDAchB,CAACmB,EAAc5D,EAAS2B,IAIrB,SAASsE,IAAoB,IAC1BjG,EAAYD,2BAAZC,QACF4D,EAAeH,IACb9B,EAAaC,cAAbD,SAER,OAAOK,sBAAW,uCAChB,WAAM0C,GAAN,qBAAAtC,EAAA,6DACQ8D,EAAWtC,EAAarC,QAAQ2E,SAASxB,GADjD,SAE6BwB,EAAS3D,cAFtC,cAEQwD,EAFR,OAGQvD,EAAM,IAAIxB,IAAU+E,GAAcxB,MAAM,KAAKyB,QAAQ,GAH7D,SAIyBrE,IAJzB,cAIQc,EAJR,yBAOSyD,EAASxD,KAAK,CACnBC,KAAM3C,EACNwC,MACAC,cAVJ,2CADgB,sDAchB,CAACzC,EAAS4D,EAAcjC,IAIrB,SAASwE,IACd,IAAMvC,EAAeH,IACfnD,EAAcC,cAFiB,EAGTC,qBAHS,mBAG9BkE,EAH8B,KAGtBC,EAHsB,KAwBrC,OAnBAhE,qBAAU,WACRiD,EACGgB,cAAc,SAAU,CACvBC,UAAWrB,MAEZ1C,MACC,SAAAgE,GAAM,OACJA,EACGC,KAAI,SAAAC,GAAK,OAAIA,EAAMC,aAAamB,YAChCjB,QAAO,SAACiB,EAAUhB,EAAGC,GAAd,OAAsBA,EAAIC,QAAQc,KAAchB,KAAGG,UAEhEzE,MAAK,SAAAC,GACJ4D,EAAU5D,MAEXE,OAAM,WACL0D,SAEH,CAACf,EAActD,IAEXoE,EAGF,SAAS2B,IACd,IAAMzC,EAAeH,IACfnD,EAAcC,cAFO,EAGHC,qBAHG,mBAGpBiF,EAHoB,KAGdC,EAHc,KAiB3B,OAZA/E,qBAAU,WACRiD,EAAarC,QACV+E,kBACA7E,OACAX,MAAK,SAAAC,GACJ2E,EAAQ,IAAI1E,IAAUD,OAEvBE,OAAM,WACLyE,SAEH,CAAC9B,EAActD,IAEXmF,EAGF,SAASc,IAAmB,IACzBvG,EAAYD,2BAAZC,QACF4D,EAAeH,IAFW,EAGFjD,qBAHE,mBAGzBC,EAHyB,KAGhBC,EAHgB,KAiBhC,OAZAC,qBAAU,WACRiD,EAAarC,QACViF,aAAaxG,GACbyB,OACAX,MAAK,SAAAC,GACJL,EAAW,IAAIM,IAAUD,OAE1BE,OAAM,WACLP,SAEH,CAACkD,EAAc5D,IAEXS,EAGF,SAASgG,IAAsB,IAC5BzG,EAAYD,2BAAZC,QACF4D,EAAeH,IACb9B,EAAaC,cAAbD,SAER,OAAOK,sBAAW,uCAChB,WAAM0C,GAAN,qBAAAtC,EAAA,6DACQsE,EAAS9C,EAAarC,QAAQmF,SADtC,SAE6BA,EAAOnE,cAFpC,cAEQwD,EAFR,OAGQvD,EAAM,IAAIxB,IAAU+E,GAAcxB,MAAM,KAAKyB,QAAQ,GAH7D,SAIyBrE,IAJzB,cAIQc,EAJR,yBAOSiE,EAAOhE,KAAK,CACjBC,KAAM3C,EACN2G,MAAOjC,EACPlC,MACAC,cAXJ,2CADgB,sDAehB,CAACmB,EAAc5D,EAAS2B,IAIrB,SAASiF,IAAoB,IAC1B5G,EAAYD,2BAAZC,QACF4D,EAAeH,IACb9B,EAAaC,cAAbD,SAER,OAAOK,sBAAW,uCAChB,WAAM0C,GAAN,qBAAAtC,EAAA,6DACQyE,EAASjD,EAAarC,QAAQsF,OAAOnC,GAD7C,SAE6BmC,EAAOtE,cAFpC,cAEQwD,EAFR,OAGQvD,EAAM,IAAIxB,IAAU+E,GAAcxB,MAAM,KAAKyB,QAAQ,GAH7D,SAIyBrE,IAJzB,cAIQc,EAJR,yBAOSoE,EAAOnE,KAAK,CACjBC,KAAM3C,EACNwC,MACAC,cAVJ,2CADgB,sDAchB,CAACzC,EAAS4D,EAAcjC,M,86BC1RrB,IAAMmF,EAAYC,IAAOlD,IAAV,KAUTmD,EAAMD,IAAOlD,IAAV,KAGK,qBAAGoD,gBAAuC,mBAelDC,EAASH,YAAOC,EAAPD,CAAH,KAQGA,IAAOlD,IAAV,M,q+DCpCZ,IAAMsD,EAAgBJ,IAAOlD,IAAV,KAIJ,qBAAGuD,MAAkBC,cAG9BC,EAAmBP,IAAOlD,IAAV,KAkBhB0D,EAAsBR,IAAOlD,IAAV,KAMnB2D,EAAeT,IAAOlD,IAAV,KAMZ4D,EAAeV,IAAOlD,IAAV,KAcZ6D,EAAYX,IAAOlD,IAAV,KAIA,qBAAGuD,MAAkBC,cAUvC,gBAAGM,EAAH,EAAGA,OAAQP,EAAX,EAAWA,MAAX,OACAO,GAAM,iNASsDP,EAAMQ,gBAT5D,6CAceb,IAAOlD,IAAV,KAIA,qBAAGuD,MAAkBC,cAKd,qBAAGD,MAAkBS,U,wkDCzF3C,IAAMC,EAAef,IAAOlD,IAAV,KAGH,qBAAGuD,MAAkBS,SAI9BE,EAAqBhB,IAAOlD,IAAV,KAWlB,qBAAGuD,MAAkBY,aAQnB,qBAAGZ,MAAkBa,gBAKvBC,EAAiBnB,IAAOoB,OAAV,KAML,qBAAGf,MAAkBQ,mBAChC,qBAAGR,MAAkBS,SAWR,qBAAGT,MAAkBa,gBAKhCG,EAAWrB,IAAOsB,MAAV,KAKQ,qBAAGjB,MAAkBQ,mBAGvC,qBAAGR,MAAkBY,aAOnB,qBAAGZ,MAAkBa,iB,iCCvElC,+DAASK,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIrD,EAAI,EAAGA,EAAIsD,UAAUnD,OAAQH,IAAK,CAAE,IAAIuD,EAASD,UAAUtD,GAAI,IAAK,IAAIwD,KAAOD,EAAcJ,OAAOM,UAAUC,eAAerH,KAAKkH,EAAQC,KAAQH,EAAOG,GAAOD,EAAOC,IAAY,OAAOH,IAA2BM,MAAMC,KAAMN,WAEhT,SAASO,EAAyBN,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEC,EAAKxD,EAAnEqD,EAEzF,SAAuCE,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DC,EAAKxD,EAA5DqD,EAAS,GAAQU,EAAaZ,OAAOa,KAAKT,GAAqB,IAAKvD,EAAI,EAAGA,EAAI+D,EAAW5D,OAAQH,IAAOwD,EAAMO,EAAW/D,GAAQ8D,EAAS5D,QAAQsD,IAAQ,IAAaH,EAAOG,GAAOD,EAAOC,IAAQ,OAAOH,EAFxMY,CAA8BV,EAAQO,GAAuB,GAAIX,OAAOe,sBAAuB,CAAE,IAAIC,EAAmBhB,OAAOe,sBAAsBX,GAAS,IAAKvD,EAAI,EAAGA,EAAImE,EAAiBhE,OAAQH,IAAOwD,EAAMW,EAAiBnE,GAAQ8D,EAAS5D,QAAQsD,IAAQ,GAAkBL,OAAOM,UAAUW,qBAAqB/H,KAAKkH,EAAQC,KAAgBH,EAAOG,GAAOD,EAAOC,IAAU,OAAOH,EAMne,IAAIgB,EAEJ,IAAMC,cAAc,QAAS,KAAM,QAE/BC,EAEJ,IAAMD,cAAc,OAAQ,KAAM,wBAE9BE,EAEJ,IAAMF,cAAc,IAAK,CACvBG,GAAI,OACJC,OAAQ,OACRC,YAAa,EACbC,KAAM,OACNC,SAAU,WACT,IAAMP,cAAc,OAAQ,CAC7BG,GAAI,YACJG,KAAM,UACNC,SAAU,UACVC,UAAW,uFACXC,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,OAAQ,EACRC,GAAI,KAGFC,EAAU,SAAiBC,GAC7B,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACbC,EAAQ3B,EAAyBwB,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMf,cAAc,MAAOpB,EAAS,CACzC+B,MAAO,OACPC,OAAQ,OACRO,QAAS,YACTC,IAAKJ,GACJE,QAAkBxK,IAAVuK,EAAsBlB,EAAQkB,EAAQ,IAAMjB,cAAc,QAAS,KAAMiB,GAAS,KAAMhB,EAAOC,IAGxGmB,EAAa,IAAMC,YAAW,SAAUJ,EAAOE,GACjD,OAAO,IAAMpB,cAAcc,EAASlC,EAAS,CAC3CoC,OAAQI,GACPF,OAEU,K","file":"static/js/1.da63cccf.chunk.js","sourcesContent":["import { useMemo, useEffect, useState, useCallback } from 'react'\nimport { useWeb3Context } from 'web3-react'\nimport BigNumber from 'bignumber.js'\nimport { useBlockNumber } from '../contexts/application'\nimport { getContract, getGasPrice, getPriceConvertionRate } from '../utils'\nimport { DAI_ADDRESSES, CRYPTO_STRUCTURED_FUND_ADDRESSES } from '../constants'\nimport DAI_ABI from '../constants/abis/DSToken.json'\n\nexport function useContract(address, abi, withSignerIfPossible = true) {\n  const { account, library } = useWeb3Context()\n\n  return useMemo(() => {\n    try {\n      return getContract(\n        address,\n        abi,\n        library,\n        withSignerIfPossible ? account : undefined,\n      )\n    } catch {\n      return null\n    }\n  }, [address, abi, library, account, withSignerIfPossible])\n}\n\nexport function useEthBalance() {\n  const { account, library } = useWeb3Context()\n  const blockNumber = useBlockNumber()\n  const [balance, setBalance] = useState()\n\n  useEffect(() => {\n    library.eth\n      .getBalance(account)\n      .then(result => {\n        setBalance(new BigNumber(result))\n      })\n      .catch(() => {\n        setBalance()\n      })\n  }, [account, library, blockNumber])\n\n  return balance\n}\n\nexport function useDaiBalance() {\n  const { account, networkId } = useWeb3Context()\n  const blockNumber = useBlockNumber()\n  const daiContract = useContract(DAI_ADDRESSES[networkId], DAI_ABI)\n  const [balance, setBalance] = useState()\n\n  useEffect(() => {\n    daiContract.methods\n      .balanceOf(account)\n      .call()\n      .then(result => {\n        setBalance(new BigNumber(result))\n      })\n      .catch(() => {\n        setBalance()\n      })\n  }, [account, blockNumber, daiContract])\n\n  return balance\n}\n\nexport function useDaiAllowance() {\n  const { account, networkId } = useWeb3Context()\n  const blockNumber = useBlockNumber()\n  const daiContract = useContract(DAI_ADDRESSES[networkId], DAI_ABI)\n  const { getPrice } = useGasPrice()\n  const [allowance, setAllowance] = useState()\n\n  const approve = useCallback(\n    async (onTransactionHash, onReceipt, onError) => {\n      const approveFund = daiContract.methods.approve(\n        CRYPTO_STRUCTURED_FUND_ADDRESSES[networkId],\n      )\n      const gas = await approveFund.estimateGas()\n      const gasPrice = await getPrice()\n\n      approveFund\n        .send({\n          from: account,\n          gas,\n          gasPrice,\n        })\n        .on('error', onError)\n        .on('receipt', onReceipt)\n        .on('transactionHash', onTransactionHash)\n    },\n    [daiContract, getPrice, account, networkId],\n  )\n\n  useEffect(() => {\n    daiContract.methods\n      .allowance(account, CRYPTO_STRUCTURED_FUND_ADDRESSES[networkId])\n      .call()\n      .then(result => {\n        setAllowance(new BigNumber(result))\n      })\n      .catch(() => {\n        setAllowance()\n      })\n  }, [daiContract, account, networkId, blockNumber])\n\n  return { allowance, approve }\n}\n\nexport function useGasPrice() {\n  const [level, setLevel] = useState('fast')\n  const getPrice = useCallback(() => getGasPrice(level), [level])\n\n  return { getPrice, setLevel }\n}\n\nexport function usePriceConvertionRate(symbol, convert) {\n  const [rate, setRate] = useState()\n\n  useEffect(() => {\n    getPriceConvertionRate(symbol, convert)\n      .then(result => {\n        setRate(new BigNumber(result))\n      })\n      .catch(() => {\n        setRate()\n      })\n  }, [symbol, convert])\n\n  return rate\n}\n","export const CRYPTO_STRUCTURED_FUND_ADDRESSES = {\n  1: '',\n  4: '0xDAB0045F3fF8FeB06F4A623bffF2ca8965cE5D0d',\n}\n\nexport const CRYPTO_STRUCTURED_FUND_CREATION_BLOCK = 5225418\n\nexport const DAI_ADDRESSES = {\n  1: '0x89d24a6b4ccb1b6faa2625fe562bdd9a23260359',\n  4: '0x02965703E9fdF580Ea74f96A9c0467682148aEf6',\n}\n","import { useCallback, useEffect, useState } from 'react'\nimport { useWeb3Context } from 'web3-react'\nimport { useContract, useGasPrice } from './ethereum'\nimport { useBlockNumber } from '../contexts/application'\nimport {\n  CRYPTO_STRUCTURED_FUND_ADDRESSES,\n  CRYPTO_STRUCTURED_FUND_CREATION_BLOCK,\n} from '../constants'\nimport CRYPTO_STRUCTURED_FUND_ABI from '../constants/abis/cryptoStructuredFund.json'\nimport BigNumber from 'bignumber.js'\n\nexport function useFundContract() {\n  const { networkId } = useWeb3Context()\n  return useContract(\n    CRYPTO_STRUCTURED_FUND_ADDRESSES[networkId],\n    CRYPTO_STRUCTURED_FUND_ABI,\n  )\n}\n\nexport function useRate() {\n  const fundContract = useFundContract()\n  const [rate, setRate] = useState()\n\n  useEffect(() => {\n    fundContract.methods\n      .rate()\n      .call()\n      .then(result => {\n        setRate(new BigNumber(result).div(1e18))\n      })\n      .catch(() => {\n        setRate()\n      })\n  }, [fundContract])\n\n  return rate\n}\n\nexport function useFundDates() {\n  const fundContract = useFundContract()\n  const [purchaseExpiringDate, setPurchaseExpiringDate] = useState()\n  const [redeemStartingDate, setRedeemStartingDate] = useState()\n\n  useEffect(() => {\n    Promise.all([\n      fundContract.methods.startBuy().call(),\n      fundContract.methods.startSell().call(),\n    ])\n      .then(([startBuy, startSell]) => {\n        setPurchaseExpiringDate(new BigNumber(startBuy).times(1000).toNumber())\n        setRedeemStartingDate(new BigNumber(startSell).times(1000).toNumber())\n      })\n      .catch(() => {\n        setPurchaseExpiringDate()\n        setRedeemStartingDate()\n      })\n  }, [fundContract])\n\n  return { purchaseExpiringDate, redeemStartingDate }\n}\n\nexport function useDaiInvestorAmount() {\n  const fundContract = useFundContract()\n  const blockNumber = useBlockNumber()\n  const [amount, setAmount] = useState()\n\n  useEffect(() => {\n    fundContract\n      .getPastEvents('Deposit', {\n        fromBlock: CRYPTO_STRUCTURED_FUND_CREATION_BLOCK,\n      })\n      .then(\n        events =>\n          events\n            .map(event => event.returnValues.depositor)\n            .filter((depositor, i, arr) => arr.indexOf(depositor) === i).length,\n      )\n      .then(result => {\n        setAmount(result)\n      })\n      .catch(() => {\n        setAmount()\n      })\n  }, [fundContract, blockNumber])\n\n  return amount\n}\n\nexport function useDaiPool() {\n  const fundContract = useFundContract()\n  const blockNumber = useBlockNumber()\n  const [pool, setPool] = useState()\n\n  useEffect(() => {\n    fundContract.methods\n      .totalSupply()\n      .call()\n      .then(result => {\n        setPool(new BigNumber(result))\n      })\n      .catch(() => {\n        setPool()\n      })\n  }, [fundContract, blockNumber])\n\n  return pool\n}\n\nexport function useDaiFundUnits() {\n  const { account } = useWeb3Context()\n  const fundContract = useFundContract()\n  const [balance, setBalance] = useState()\n\n  useEffect(() => {\n    fundContract.methods\n      .balanceOf(account)\n      .call()\n      .then(result => {\n        setBalance(new BigNumber(result))\n      })\n      .catch(() => {\n        setBalance()\n      })\n  }, [fundContract, account])\n\n  return balance\n}\n\nexport function useDaiFundPurchase() {\n  const { account } = useWeb3Context()\n  const fundContract = useFundContract()\n  const { getPrice } = useGasPrice()\n\n  return useCallback(\n    async amount => {\n      const deposit = fundContract.methods.deposit(amount)\n      const estimatedGas = await deposit.estimateGas()\n      const gas = new BigNumber(estimatedGas).times(1.5).toFixed(0)\n      const gasPrice = await getPrice()\n\n      // BUG\n      return deposit.send({\n        from: account,\n        gas,\n        gasPrice,\n      })\n    },\n    [fundContract, account, getPrice],\n  )\n}\n\nexport function useDaiFundRedeem() {\n  const { account } = useWeb3Context()\n  const fundContract = useFundContract()\n  const { getPrice } = useGasPrice()\n\n  return useCallback(\n    async amount => {\n      const withdraw = fundContract.methods.withdraw(amount)\n      const estimatedGas = await withdraw.estimateGas()\n      const gas = new BigNumber(estimatedGas).times(1.5).toFixed(0)\n      const gasPrice = await getPrice()\n\n      // BUG\n      return withdraw.send({\n        from: account,\n        gas,\n        gasPrice,\n      })\n    },\n    [account, fundContract, getPrice],\n  )\n}\n\nexport function useEthInvestorAmount() {\n  const fundContract = useFundContract()\n  const blockNumber = useBlockNumber()\n  const [amount, setAmount] = useState()\n\n  useEffect(() => {\n    fundContract\n      .getPastEvents('Invest', {\n        fromBlock: CRYPTO_STRUCTURED_FUND_CREATION_BLOCK,\n      })\n      .then(\n        events =>\n          events\n            .map(event => event.returnValues.investor)\n            .filter((investor, i, arr) => arr.indexOf(investor) === i).length,\n      )\n      .then(result => {\n        setAmount(result)\n      })\n      .catch(() => {\n        setAmount()\n      })\n  }, [fundContract, blockNumber])\n\n  return amount\n}\n\nexport function useEthPool() {\n  const fundContract = useFundContract()\n  const blockNumber = useBlockNumber()\n  const [pool, setPool] = useState()\n\n  useEffect(() => {\n    fundContract.methods\n      .totalInvestment()\n      .call()\n      .then(result => {\n        setPool(new BigNumber(result))\n      })\n      .catch(() => {\n        setPool()\n      })\n  }, [fundContract, blockNumber])\n\n  return pool\n}\n\nexport function useEthFundUnits() {\n  const { account } = useWeb3Context()\n  const fundContract = useFundContract()\n  const [balance, setBalance] = useState()\n\n  useEffect(() => {\n    fundContract.methods\n      .investmentOf(account)\n      .call()\n      .then(result => {\n        setBalance(new BigNumber(result))\n      })\n      .catch(() => {\n        setBalance()\n      })\n  }, [fundContract, account])\n\n  return balance\n}\n\nexport function useEthFundPurchase() {\n  const { account } = useWeb3Context()\n  const fundContract = useFundContract()\n  const { getPrice } = useGasPrice()\n\n  return useCallback(\n    async amount => {\n      const invest = fundContract.methods.invest()\n      const estimatedGas = await invest.estimateGas()\n      const gas = new BigNumber(estimatedGas).times(1.5).toFixed(0)\n      const gasPrice = await getPrice()\n\n      // BUG\n      return invest.send({\n        from: account,\n        value: amount,\n        gas,\n        gasPrice,\n      })\n    },\n    [fundContract, account, getPrice],\n  )\n}\n\nexport function useEthFundRedeem() {\n  const { account } = useWeb3Context()\n  const fundContract = useFundContract()\n  const { getPrice } = useGasPrice()\n\n  return useCallback(\n    async amount => {\n      const redeem = fundContract.methods.redeem(amount)\n      const estimatedGas = await redeem.estimateGas()\n      const gas = new BigNumber(estimatedGas).times(1.5).toFixed(0)\n      const gasPrice = await getPrice()\n\n      // BUG\n      return redeem.send({\n        from: account,\n        gas,\n        gasPrice,\n      })\n    },\n    [account, fundContract, getPrice],\n  )\n}\n","import styled from 'styled-components'\n\nexport const Container = styled.div`\n  width: 100%;\n  max-width: 42.5rem;\n  padding: 0 0.75rem;\n\n  @media screen and (min-width: 600px) {\n    padding: 0;\n  }\n`\n\nexport const Row = styled.div`\n  margin-top: 1.5rem;\n  display: flex;\n  justify-content: ${({ justifyBetween }) => justifyBetween && 'space-between'}\n\n  > *:not(:first-child) {\n    margin-left: 1.25rem;\n  }\n\n  @media screen and (min-width: 600px) {\n    margin-top: 3rem;\n\n    > *:not(:first-child) {\n      margin-left: 2.5rem;\n    }\n  }\n`\n\nexport const SubRow = styled(Row)`\n  margin-top: 0.75rem;\n\n  @media screen and (min-width: 600px) {\n    margin-top: 1.5rem;\n  }\n`\n\nexport const Spacer = styled.div`\n  flex: 1;\n`\n","import styled from 'styled-components'\n\nexport const PurchaseBlock = styled.div`\n  width: 100%;\n  padding: 1.25rem 2rem;\n  border-radius: 0.5rem;\n  background-color: ${({ theme }) => theme.mirageBlue};\n`\n\nexport const PurchaseBlockTop = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  > *:not(:first-child) {\n    margin-top: 0.75rem;\n  }\n\n  @media screen and (min-width: 600px) {\n    flex-direction: row;\n    justify-content: space-between;\n\n    > * {\n      margin: 0;\n    }\n  }\n`\n\nexport const PurchaseBlockBottom = styled.div`\n  margin-top: 2rem;\n  display: flex;\n  justify-content: center;\n`\n\nexport const PurchaseInfo = styled.div`\n  > *:not(:first-child) {\n    margin-top: 0.75rem;\n  }\n`\n\nexport const PurchaseDate = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  > *:not(:first-child) {\n    margin-top: 0.75rem;\n  }\n\n  > .item {\n    display: flex;\n    align-items: center;\n  }\n`\n\nexport const DataBlock = styled.div`\n  flex: 1;\n  padding: 1.25rem 0;\n  border-radius: 0.5rem;\n  background-color: ${({ theme }) => theme.mirageBlue};\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n\n  > *:not(:first-child) {\n    margin-top: 0.5rem;\n  }\n\n  ${({ strong, theme }) =>\n    strong &&\n    `\n    &::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 2rem;\n      height: 2rem;\n      background: linear-gradient(135deg, transparent 0% 30%, ${theme.eucalyptusGreen} 30% 50%, transparent 50%);\n    }\n  `}\n`\n\nexport const DateBlock = styled.div`\n  flex: 1;\n  padding: 1.25rem;\n  border-radius: 0.5rem;\n  background-color: ${({ theme }) => theme.mirageBlue};\n  display: flex;\n  align-items: center;\n\n  > *:not(:first-child) {\n    border-left: 1px solid ${({ theme }) => theme.white};\n  }\n\n  > .date-info {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    > *:not(:first-child) {\n      margin-top: 0.75rem;\n    }\n  }\n`\n","import styled from 'styled-components'\n\nexport const PurchaseForm = styled.div`\n  height: 3rem;\n  border-radius: 0.5rem;\n  border: 1px solid ${({ theme }) => theme.white};\n  display: flex;\n`\n\nexport const PurchaseInputField = styled.div`\n  flex: 1;\n  padding: 0 1rem;\n  display: flex;\n  align-items: center;\n\n  > input {\n    flex: 1\n    width: 100%;\n    border: none;\n    background-color: transparent;\n    color: ${({ theme }) => theme.textColor};\n    font-size: 1rem;\n\n    &:focus {\n      outline: none;\n    }\n\n    &::placeholder {\n      color: ${({ theme }) => theme.loblollyGray};\n    }\n  }\n`\n\nexport const PurchaseButton = styled.button`\n  height: calc(3rem - 2px);\n  padding: 0 1rem;\n  border: none;\n  border-top-right-radius: 0.5rem;\n  border-bottom-right-radius: 0.5rem;\n  background-color: ${({ theme }) => theme.eucalyptusGreen};\n  color: ${({ theme }) => theme.white};\n  font-size: 1rem;\n  line-height: 3rem;\n  outline: none;\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n  }\n\n  &[disabled] {\n    background-color: ${({ theme }) => theme.loblollyGray};\n    cursor: wait;\n  }\n`\n\nexport const USDInput = styled.input`\n  width: 3.5rem;\n  margin: 0 0.25rem;\n  padding: 0 0.5rem;\n  border: none;\n  border-bottom: 2px solid ${({ theme }) => theme.eucalyptusGreen};\n  background-color: transparent;\n  font-size: 1.25rem;\n  color: ${({ theme }) => theme.textColor};\n\n  &:focus {\n    outline: none;\n  }\n\n  &::placeholder {\n    color: ${({ theme }) => theme.loblollyGray};\n  }\n\n  @media screen and (min-width: 600px) {\n    width: 4rem;\n    font-size: 1.5rem;\n  }\n`\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"item\");\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"item\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"rect\", {\n  id: \"Rectangle\",\n  fill: \"#00FF8C\",\n  fillRule: \"nonzero\",\n  transform: \"translate(12.000000, 12.000000) rotate(45.000000) translate(-12.000000, -12.000000) \",\n  x: 8,\n  y: 8,\n  width: 8,\n  height: 8,\n  rx: 2\n}));\n\nvar SvgItem = function SvgItem(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? React.createElement(\"title\", null, title) : null, _ref3, _ref4);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgItem, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/item.e3c71cc2.svg\";\nexport { ForwardRef as ReactComponent };"],"sourceRoot":""}